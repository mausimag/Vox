var VoxBinder=function(){var e={};return e.mapping={},e.getAllBindedElements=function(){for(var e=[],t=document.getElementsByTagName("*"),n=0;n<t.length;n++)null!==t[n].getAttribute(Vox.attrBind)&&e.push(t[n]);return e},e.getObjectAttr=function(e,t){if("undefined"!=typeof t&&null!==t){e=e.split(/[\.\[\]\"\']{1,2}/);for(var n=0,r=e.length;n<r;n++)if(""!==e[n]&&(t=t[e[n]],"undefined"==typeof t||null===t))return;return t}},e.elementValue=function(t,n){if("undefined"==typeof t)return!1;var r=n.indexOf(".");return r>-1?e.elementValue(t[n.substring(0,r)],n.substr(r+1)):t[n]},e.bindGetterSetter=function(t,n,r,i){if("undefined"==typeof t)return!1;var a=n.indexOf(".");return a>-1?e.bindGetterSetter(t[n.substring(0,a)],n.substr(a+1),r,i):void Object.defineProperty(t,n,{get:function(){return e.mapping[r]},set:function(t){i.value=t,e.mapping[r]=t}})},e.bindElement=function(t,n){var r=t.getAttribute(Vox.attrBind),i=r.split(/[\.\[\]\"\']{1,2}/),a=i.shift(),u=e.ctx[a],o=e.elementValue(u,i.join("."));e.mapping[r]=o,e.bindGetterSetter(u,i.join("."),r,t);var l=t.tagName.toLowerCase(),f=t.type.toLowerCase(),d="",s="";"input"==l||"textarea"==l?"text"==f||"textarea"==f?(d="value",s="keyup"):"checkbox"==f&&(d="checked",s="change"):"select"==l&&(d="value",s="change"),""!==d&&""!==s&&(t[d]=o,t.addEventListener(s,function(){var n=t[d],i=t.getAttribute(Vox.attrValueType);if(i)switch(i.toLowerCase()){case"int":n=parseInt(n);break;case"float":n=parseFloat(n);break;case"string":default:n=n.toString()}e.mapping[r]=n},!1))},e.init=function(t){null==t&&(e.ctx=window);for(var n=e.getAllBindedElements(),r=0;r<n.length;r++){var i=n[r].getAttribute(Vox.attrBind).split(".");e.bindElement(n[r],i)}},e}();
var VoxValidation=function(){var t={};return t.ctx=null,t.invalids=[],t.init=function(e){null==e&&(t.ctx=window)},t.getVoxdElements=function(){var e=t.ctx.document.getElementsByTagName("*");t.invalids=[],Vox.forEach(e,function(e){e.getAttribute(Vox.attrPattern)&&t.invalids.push(e);var a=e.getAttribute(Vox.attrRequired);"true"==a&&t.invalids.push(e)})},t.validateRegex=function(t,e){var a=new RegExp(e);return a.test(t)},t.validateRequired=function(){var e=[];return Vox.forEach(t.invalids,function(a){var i=a.tagName.toLowerCase();if("input"==i||"textarea"==i){var n=a.value.trim(),r=a.getAttribute(Vox.attrRequired),u=a.getAttribute(Vox.attrPattern),o=r?"^.{0}$":u;if(1==t.validateRegex(n,o)){var l={element:a};l.message=a.getAttribute(Vox.attrInvalidMessage),e.push(l)}}}),e},t.validateAll=function(e){t.getVoxdElements(),e(t.validateRequired())},t}();
var Vox=function(){var t={};return t.ctx=null,t.binder=VoxBinder,t.attrBind="vox-bind",t.attrValueType="vox-value-type",t.validation=VoxValidation,t.attrPattern="vox-pattern",t.attrRequired="vox-required",t.attrInvalidMessage="vox-message",t.bootstrap=function(){},t.forEach=function(t,a){for(var r=t.length,e=0;e<r;e++)a(t[e],e,t)},t}();