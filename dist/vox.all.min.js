var VoxAjax=function(){var t={},n=null,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=function(){for(var t=!1,n=e.length,r=0;r<n;r++){try{t=e[r]()}catch(t){continue}break}return t},c=function(t){var n;try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return[n,t]};return t.checkXHR=function(){return null==n&&(n=r()),n},t.http=function(n){var e=t.checkXHR();if(e){var r={success:function(){},error:function(){},then:function(){}};e.open(n.method,n.url,!0),e.setRequestHeader("Content-type",n.contentType),e.onreadystatechange=function(){var t;4===e.readyState&&(t=c(e),e.status>=200&&e.status<300?r.success.apply(r,t):r.error.apply(r,t),r.then.apply(r,t))},e.send(n.data);var o={success:function(t){return r.success=t,o},error:function(t){return r.error=t,o},then:function(t){return r.then=t,o}};return o}},t.post=function(n,e){return t.http({method:"POST",url:n,data:e,contentType:"application/json"})},t.get=function(n,e){return t.http({method:"GET",url:n,data:e,contentType:"application/json"})},t.put=function(n,e){return t.http({method:"PUT",url:n,data:e,contentType:"application/json"})},t.delete=function(n,e){return t.http({method:"DELETE",url:n,data:e,contentType:"application/json"})},t}();
var VoxBinder=function(){var t={};t._mapping={},t.init=function(e){null==e&&(t.ctx=window),t.update(),t.ctx.addEventListener("DOMNodeInserted",function(e){e.srcElement.attributes&&"undefined"!=typeof e.srcElement.attributes[Vox.attrBind]&&t.bindElement(e.srcElement)})},t.update=function(){for(var e=Vox.getAllElementsByAttr(Vox.attrBind),n=0;n<e.length;n++)t.bindElement(e[n])},t.bindGetterSetter=function(e,n,r,o,i){if("undefined"==typeof e)return!1;var a=n.indexOf(".");return a>-1?t.bindGetterSetter(e[n.substring(0,a)],n.substr(a+1),r,o,i):("undefined"==typeof e[n]&&(e[n]="undefined"!=typeof o.value&&o.value?o.value:""),void Object.defineProperty(e,n,{get:function(){return Vox.binder._mapping[r]},set:function(e){var t=o.getAttribute(Vox.attrValueType);console.log(e),e=Vox.binder.castValue(t,e),o[i]=e,Vox.binder._mapping[r]=e}}))},t.castValue=function(e,t){var n=Vox._typeDef.string;return null!=e&&(e=e.toLowerCase(),"undefined"!=typeof Vox._typeDef[e]&&(n=Vox._typeDef[e])),n(t)},t.bindElement=function(e){var n=e.getAttribute(Vox.attrBind),r=n.split(/[\.\[\]\"\']{1,2}/),o=r.shift(),i=t.ctx[o],a=Vox.getElementDef(e),u=Vox.elementValue(i,r.join("."));t._mapping[n]=u,t.bindGetterSetter(i,r.join("."),n,e,a.valueDOM),null!=a&&("undefined"==typeof u&&(u=""),e[a.valueDOM]=u,e.addEventListener(a.eventType,function(){var r=e[a.valueDOM],o=e.getAttribute(Vox.attrValueType);r=Vox.binder.castValue(o,r),e.value=r,t._mapping[n]=r},!1))};var n=Array.prototype.push,r=Array.prototype.pop,o=Array.prototype.splice;return Array.prototype.push=function(){if(ins=n.apply(this,arguments),this._vox_observe){var e=this._vox_observe,t=this._vox_values;Vox.binder.insertRow(this[this.length-1],e,t)}return ins},Array.prototype.pop=function(){return e=r.apply(this,arguments),this._vox_observe&&t.removeRow(this._vox_observe),e},Array.prototype.splice=function(){if(e=o.apply(this,arguments),this._vox_observe){var n=arguments.length>1?arguments[1]:1;t.removeRow(this._vox_observe,arguments[0],n)}return e},t.insertRow=function(e,n,r){for(var o=t.ctx.document.getElementById(n),i=o.rows.length,a=r.length,u=o.insertRow(i),s=0;s<a;s++){var l=u.insertCell(s),p=Vox.getValuePath(e,r[s]);l.innerHTML=p}},t.removeRow=function(e,n,r){var o=t.ctx.document.getElementById(e);if(n)if(r)for(var i=n+1,a=0;a<r;)o.deleteRow(i),a++;else o.deleteRow(n);else o.deleteRow(o.rows.length-1)},t.bindTable=function(e,n,r){e._vox_observe=n,e._vox_values=r,Vox.forEach(e,function(e){t.insertRow(e,n,r)})},t}();
Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),t=1;t<arguments.length;t++){var n=arguments[t];if(void 0!==n&&null!==n){n=Object(n);for(var o=Object.keys(Object(n)),c=0,i=o.length;c<i;c++){var a=o[c],b=Object.getOwnPropertyDescriptor(n,a);void 0!==b&&b.enumerable&&(r[a]=n[a])}}}return r}});
var VoxFormula=function(){var r={};return r.ctx={},r}();
var VoxLocale=function(){var t={},e={};return t.ctx=null,t.getLabelValue=function(e,a,n){if("undefined"==typeof e)return!1;var r=a.indexOf(".");return r>-1?t.getLabelValue(e[a.substring(0,r)],a.substr(r+1),n):e[a]},t.setLabel=function(a){var n=a.getAttribute(Vox.attrLabel),r=n.split(/[\.\[\]\"\']{1,2}/);if(n&&0!=n.trim().legth){var l=t.getLabelValue(e.data,r.join("."),n),u=a.tagName.toLowerCase();"input"==u||"textarea"==u?a.placeholder=l:a.innerHTML=l}},t.update=function(){var e=Vox.getAllElementsByAttr(Vox.attrLabel);Vox.forEach(e,function(e){t.setLabel(e)})},t.setLanguage=function(a,n){null==n&&(t.ctx=window),e=a,t.update()},t}();
var VoxValidation=function(){var t={};return t.ctx=null,t.invalids=[],t.init=function(e){null==e&&(t.ctx=window)},t.getVoxdElements=function(e){var n=e.getElementsByTagName("*");t.invalids=[],Vox.forEach(n,function(e){(e.getAttribute(Vox.attrPattern)||"true"==e.getAttribute(Vox.attrRequired))&&t.invalids.push(e)})},t.validateRegex=function(t,e){var n=new RegExp(e);return n.test(t)},t.validateRequired=function(){var e=[];return Vox.forEach(t.invalids,function(n){var i=Vox.getElementDef(n),a=n[i.valueDOM].trim(),r=n.getAttribute(Vox.attrRequired)?"^.{0}$":n.getAttribute(Vox.attrPattern);if(1==t.validateRegex(a,r)){var u={element:n};u.message=n.getAttribute(Vox.attrInvalidMessage),e.push(u)}}),e},t.validateAll=function(e){return"undefined"!==e&&(e=window.document),t.getVoxdElements(e),t.validateRequired()},t}();
var Vox=function(){var e={};return e.ctx=null,e.binder=VoxBinder,e.attrBind="vox-bind",e.attrValueType="vox-value-type",e.validation=VoxValidation,e.attrPattern="vox-pattern",e.attrRequired="vox-required",e.attrInvalidMessage="vox-message",e.ajax=VoxAjax,e.locale=VoxLocale,e.attrLabel="vox-label",e.listeners=[],e.bootstrap=function(){},e.elementDef={input:{text:{valueDOM:"value",eventType:"keyup"},checkbox:{valueDOM:"checked",eventType:"change"}},textarea:{valueDOM:"value",eventType:"keyup"},select:{valueDOM:"value",eventType:"change"}},e._typeDef={int:function(e){return parseInt(e)},float:function(e){return parseFloat(e)},currency:function(e){return Vox.toFormattedCurrency(e)},string:function(e){return e.toString()}},e.getElementDef=function(t){var n=t.tagName?t.tagName.toLowerCase():"input",r=t.type?t.type.toLowerCase():"text",a=null;return"undefined"!==e.elementDef[n]&&(a=n.indexOf("input")>-1?e.elementDef[n][r]:e.elementDef[n]),a},e.forEach=function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},e.getAllElementsByAttr=function(e){for(var t=[],n=document.getElementsByTagName("*"),r=0;r<n.length;r++)null!==n[r].getAttribute(e)&&t.push(n[r]);return t},e.elementValue=function(t,n){if("undefined"==typeof t)return!1;var r=n.indexOf(".");return r>-1?e.elementValue(t[n.substring(0,r)],n.substr(r+1)):t[n]},e.getObjectAttr=function(e,t){if("undefined"!=typeof t&&null!==t){e=e.split(/[\.\[\]\"\']{1,2}/);for(var n=0,r=e.length;n<r;n++)if(""!==e[n]&&(t=t[e[n]],"undefined"==typeof t||null===t))return;return t}},e.getValuePath=function(t,n){if("undefined"==typeof t)return!1;var r=n.indexOf(".");return r>-1?e.getValuePath(t[n.substring(0,r)],n.substr(r+1)):t[n]},e.toFormattedCurrency=function(e){e=e.toString();var t=e,n=t.replace(/\./g,"").replace(/,/g,"").replace(/^0+/,"");if(!n.match(/^([0-9]+$)/g))return"";var r=n;2==r.length&&(r="0"+r),1==r.length&&(r="00"+r);for(var a="",u=r.length,l=0;l<u;l++){var o="";2==l&&(o=","),l>3&&(l+1)%3==0&&(o="."),a=r.substring(r.length-1-l,r.length-l)+o+a}return t=a},e}();
Vox.elementDef["ons-input"]={text:{valueDOM:"value",eventType:"keyup"},number:{valueDOM:"value",eventType:"change"},date:{valueDOM:"value",eventType:"change"},time:{valueDOM:"value",eventType:"change"}};